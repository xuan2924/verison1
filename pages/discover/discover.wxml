<!--pages/discover/discover.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-bar">
      <view class="search-icon">ğŸ”</view>
      <input 
        class="search-input" 
        placeholder="æœç´¢æ•…äº‹ã€ä¸»é¢˜æˆ–åˆ›ä½œè€…"
        placeholder-class="search-placeholder"
      />
      <view class="search-filter">ç­›é€‰</view>
    </view>
  </view>

  <!-- è½®æ’­å›¾ -->
  <view class="banner-section">
    <swiper 
      class="banner-swiper" 
      indicator-dots="{{true}}"
      autoplay="{{true}}"
      interval="{{3000}}"
      duration="{{500}}"
    >
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <view class="banner-item">
          <image class="banner-image" src="{{item.image}}"></image>
          <view class="banner-content">
            <text class="banner-title">{{item.title}}</text>
            <text class="banner-desc">{{item.desc}}</text>
          </view>
        </view>
      </swiper-item>
    </swiper>
  </view>

  <!-- çƒ­é—¨åˆ†ç±» -->
  <view class="category-section">
    <view class="section-header">
      <text class="section-title">çƒ­é—¨åˆ†ç±»</text>
      <text class="section-more">å…¨éƒ¨</text>
    </view>
    <view class="category-grid">
      <view 
        class="category-item" 
        wx:for="{{categories}}" 
        wx:key="id"
        bindtap="onCategoryTap"
        data-category="{{item.name}}"
      >
        <view class="category-icon">{{item.icon}}</view>
        <text class="category-name">{{item.name}}</text>
        <text class="category-count">{{item.count}}ç¯‡</text>
      </view>
    </view>
  </view>

  <!-- æ¨èæ•…äº‹ -->
  <view class="stories-section">
    <view class="section-header">
      <text class="section-title">æ¨èæ•…äº‹</text>
      <view class="section-tabs">
        <text 
          class="tab-item {{currentTab === 'hot' ? 'active' : ''}}"
          bindtap="switchTab"
          data-tab="hot"
        >çƒ­é—¨</text>
        <text 
          class="tab-item {{currentTab === 'new' ? 'active' : ''}}"
          bindtap="switchTab"
          data-tab="new"
        >æœ€æ–°</text>
        <text 
          class="tab-item {{currentTab === 'completed' ? 'active' : ''}}"
          bindtap="switchTab"
          data-tab="completed"
        >å·²å®Œç»“</text>
      </view>
    </view>

    <view class="stories-list">
      <view 
        class="story-card" 
        wx:for="{{recommendedStories}}" 
        wx:key="id"
        bindtap="viewStory"
        data-story="{{item}}"
      >
        <view class="story-header">
          <text class="story-title">{{item.title}}</text>
          <view class="story-tag {{item.theme}}">{{item.theme}}</view>
        </view>
        
        <text class="story-preview">{{item.preview}}...</text>
        
        <view class="story-stats">
          <view class="stat">
            <text class="stat-icon">ğŸ‘ï¸</text>
            <text class="stat-value">{{item.views}}</text>
          </view>
          <view class="stat">
            <text class="stat-icon">â¤ï¸</text>
            <text class="stat-value">{{item.likes}}</text>
          </view>
          <view class="stat">
            <text class="stat-icon">ğŸ‘¥</text>
            <text class="stat-value">{{item.participants}}</text>
          </view>
        </view>

        <view class="story-footer">
          <view class="author-info">
            <view class="author-avatar">{{item.author.charAt(0)}}</view>
            <text class="author-name">{{item.author}}</text>
          </view>
          <text class="create-time">{{item.createTime}}</text>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" bindtap="loadMoreStories">
      <text class="load-text">{{loading ? 'åŠ è½½ä¸­...' : 'åŠ è½½æ›´å¤š'}}</text>
    </view>
  </view>
</view>